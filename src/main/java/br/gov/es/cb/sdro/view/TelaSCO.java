/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package br.gov.es.cb.sdro.view;

import br.gov.es.cb.sdro.control.ControlMilitarAdapter;
import br.gov.es.cb.sdro.control.MilitarControler;
import br.gov.es.cb.sdro.model.Empenho;
import br.gov.es.cb.sdro.model.Equipe;
import br.gov.es.cb.sdro.model.MilitarAdapter;
import br.gov.es.cb.sdro.model.Sco;
import br.gov.es.cb.sdro.util.EmpenhoDAO;
import br.gov.es.cb.sdro.util.EquipeDAO;
import br.gov.es.cb.sdro.util.ScoDAO;
import java.time.Instant;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Date;
import java.util.GregorianCalendar;
import java.util.List;
import javax.swing.DefaultListModel;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;

/**
 *
 * @author heitor.coelho
 */
public class TelaSCO extends javax.swing.JInternalFrame {


    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JTabbedPane abasSco;
    private javax.swing.JButton btn_emp_gravar;
    private javax.swing.JButton btn_emp_novo;
    private javax.swing.JButton btn_sco_altera;
    private javax.swing.JButton btn_sco_carregar;
    private javax.swing.JButton btn_sco_excluir;
    private javax.swing.JButton btn_sco_ger_recursos;
    private javax.swing.JButton btn_sco_novo;
    private javax.swing.JButton btn_sco_salvar;
    private javax.swing.JComboBox<String> cmb_list_sco;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JPanel jPanel4;
    private javax.swing.JPanel jPanel5;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JLabel lbl_emp_Equipe;
    private javax.swing.JLabel lbl_emp_data_inicio;
    private javax.swing.JLabel lbl_emp_descricao;
    private javax.swing.JLabel lbl_list_equipes;
    private javax.swing.JLabel lbl_sco_local;
    private javax.swing.JLabel lbl_sco_mil_adm;
    private javax.swing.JLabel lbl_sco_mil_cmd;
    private javax.swing.JLabel lbl_sco_mil_log;
    private javax.swing.JLabel lbl_sco_mil_ope;
    private javax.swing.JLabel lbl_sco_mil_plan;
    private javax.swing.JLabel lbl_sco_nome;
    private javax.swing.JTable tbl_empenho;
    private javax.swing.JTable tbl_equipes;
    private javax.swing.JTextField txt_fld_emp_data_fim;
    private javax.swing.JTextField txt_fld_emp_data_ini;
    private javax.swing.JTextField txt_fld_emp_descr;
    private javax.swing.JTextField txt_fld_emp_equipe_atual;
    private javax.swing.JTextField txt_sco_local;
    private javax.swing.JTextField txt_sco_mil_adm;
    private javax.swing.JTextField txt_sco_mil_cmd;
    private javax.swing.JTextField txt_sco_mil_log;
    private javax.swing.JTextField txt_sco_mil_ope;
    private javax.swing.JTextField txt_sco_mil_plan;
    private javax.swing.JTextField txt_sco_nome;
    // End of variables declaration//GEN-END:variables

    DefaultTableModel equipesTable, empenhosTable;
    GregorianCalendar gc = new GregorianCalendar();
    ScoDAO scoDao = new ScoDAO();
    private List<Sco> listaSco;
    private List<Equipe> listaEquipes;
    private MilitarAdapter militarAdaptado;
    private ControlMilitarAdapter milControl;
    private Sco scoAtual;
    private EmpenhoDAO empenhoDAO;
    private EquipeDAO equipeDao;
    private List<Equipe> listaAuxEquipes;
    private List<Empenho> listaEmpenhos;
    private Equipe equipeSelecionada;

    private Sco novoSCO;

    private static TelaSCO telaSCO;

    /**
     * Creates new form TelaSCO
     */
    public TelaSCO() {
        initComponents();
        this.setVisible(true);
        alteraCamposSco(false);
        alteraCamposEmp(false);
        carregaTela();
        milControl = new ControlMilitarAdapter();
        empenhoDAO = new EmpenhoDAO();
        equipeDao = new EquipeDAO();
        listaAuxEquipes = new ArrayList();
        equipesTable = (DefaultTableModel) tbl_equipes.getModel();
        empenhosTable = (DefaultTableModel) tbl_empenho.getModel();
        btn_sco_altera.setEnabled(false);
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        abasSco = new javax.swing.JTabbedPane();
        jPanel1 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        lbl_sco_nome = new javax.swing.JLabel();
        txt_sco_nome = new javax.swing.JTextField();
        lbl_sco_mil_adm = new javax.swing.JLabel();
        txt_sco_mil_adm = new javax.swing.JTextField();
        cmb_list_sco = new javax.swing.JComboBox<String>();
        btn_sco_carregar = new javax.swing.JButton();
        lbl_sco_mil_ope = new javax.swing.JLabel();
        txt_sco_mil_ope = new javax.swing.JTextField();
        lbl_sco_mil_cmd = new javax.swing.JLabel();
        txt_sco_mil_cmd = new javax.swing.JTextField();
        lbl_sco_mil_log = new javax.swing.JLabel();
        lbl_sco_mil_plan = new javax.swing.JLabel();
        txt_sco_mil_log = new javax.swing.JTextField();
        txt_sco_mil_plan = new javax.swing.JTextField();
        btn_sco_altera = new javax.swing.JButton();
        btn_sco_excluir = new javax.swing.JButton();
        btn_sco_salvar = new javax.swing.JButton();
        btn_sco_novo = new javax.swing.JButton();
        lbl_sco_local = new javax.swing.JLabel();
        txt_sco_local = new javax.swing.JTextField();
        btn_sco_ger_recursos = new javax.swing.JButton();
        jPanel4 = new javax.swing.JPanel();
        jPanel5 = new javax.swing.JPanel();
        lbl_list_equipes = new javax.swing.JLabel();
        jScrollPane2 = new javax.swing.JScrollPane();
        tbl_equipes = new javax.swing.JTable();
        jPanel3 = new javax.swing.JPanel();
        txt_fld_emp_descr = new javax.swing.JTextField();
        lbl_emp_descricao = new javax.swing.JLabel();
        btn_emp_gravar = new javax.swing.JButton();
        jScrollPane3 = new javax.swing.JScrollPane();
        tbl_empenho = new javax.swing.JTable();
        lbl_emp_data_inicio = new javax.swing.JLabel();
        txt_fld_emp_data_ini = new javax.swing.JTextField();
        jLabel1 = new javax.swing.JLabel();
        txt_fld_emp_data_fim = new javax.swing.JTextField();
        lbl_emp_Equipe = new javax.swing.JLabel();
        txt_fld_emp_equipe_atual = new javax.swing.JTextField();
        btn_emp_novo = new javax.swing.JButton();

        setClosable(true);
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel2.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lbl_sco_nome.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_sco_nome.text")); // NOI18N
        jPanel2.add(lbl_sco_nome, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 60, -1, -1));

        txt_sco_nome.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_sco_nome.text")); // NOI18N
        txt_sco_nome.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txt_sco_nomeActionPerformed(evt);
            }
        });
        jPanel2.add(txt_sco_nome, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 50, 284, -1));

        lbl_sco_mil_adm.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_sco_mil_adm.text")); // NOI18N
        jPanel2.add(lbl_sco_mil_adm, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 150, -1, -1));

        txt_sco_mil_adm.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_sco_mil_adm.text")); // NOI18N
        txt_sco_mil_adm.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txt_sco_mil_admActionPerformed(evt);
            }
        });
        jPanel2.add(txt_sco_mil_adm, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 150, 260, -1));

        cmb_list_sco.setMaximumRowCount(10);
        cmb_list_sco.setModel(new javax.swing.DefaultComboBoxModel(new String[] { "Clique para selecionar" }));
        cmb_list_sco.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                cmb_list_scoActionPerformed(evt);
            }
        });
        jPanel2.add(cmb_list_sco, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 20, 440, -1));

        btn_sco_carregar.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.btn_sco_carregar.text")); // NOI18N
        btn_sco_carregar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_sco_carregarActionPerformed(evt);
            }
        });
        jPanel2.add(btn_sco_carregar, new org.netbeans.lib.awtextra.AbsoluteConstraints(480, 20, 110, -1));

        lbl_sco_mil_ope.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_sco_mil_ope.text")); // NOI18N
        jPanel2.add(lbl_sco_mil_ope, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 190, -1, -1));

        txt_sco_mil_ope.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_sco_mil_ope.text")); // NOI18N
        txt_sco_mil_ope.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txt_sco_mil_opeActionPerformed(evt);
            }
        });
        jPanel2.add(txt_sco_mil_ope, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 180, 260, -1));

        lbl_sco_mil_cmd.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_sco_mil_cmd.text")); // NOI18N
        jPanel2.add(lbl_sco_mil_cmd, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 120, -1, -1));

        txt_sco_mil_cmd.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_sco_mil_cmd.text")); // NOI18N
        jPanel2.add(txt_sco_mil_cmd, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 110, 260, -1));

        lbl_sco_mil_log.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_sco_mil_log.text")); // NOI18N
        jPanel2.add(lbl_sco_mil_log, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 220, -1, -1));

        lbl_sco_mil_plan.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_sco_mil_plan.text")); // NOI18N
        jPanel2.add(lbl_sco_mil_plan, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 250, -1, -1));

        txt_sco_mil_log.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_sco_mil_log.text")); // NOI18N
        jPanel2.add(txt_sco_mil_log, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 210, 260, -1));

        txt_sco_mil_plan.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_sco_mil_plan.text")); // NOI18N
        jPanel2.add(txt_sco_mil_plan, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 250, 260, -1));

        btn_sco_altera.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.btn_sco_altera.text")); // NOI18N
        btn_sco_altera.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_sco_alteraActionPerformed(evt);
            }
        });
        jPanel2.add(btn_sco_altera, new org.netbeans.lib.awtextra.AbsoluteConstraints(130, 320, 90, -1));

        btn_sco_excluir.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.btn_sco_excluir.text")); // NOI18N
        btn_sco_excluir.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_sco_excluirActionPerformed(evt);
            }
        });
        jPanel2.add(btn_sco_excluir, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 320, 110, -1));

        btn_sco_salvar.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.btn_sco_salvar.text")); // NOI18N
        btn_sco_salvar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_sco_salvarActionPerformed(evt);
            }
        });
        jPanel2.add(btn_sco_salvar, new org.netbeans.lib.awtextra.AbsoluteConstraints(250, 320, 100, -1));

        btn_sco_novo.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.btn_sco_novo.text")); // NOI18N
        btn_sco_novo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_sco_novoActionPerformed(evt);
            }
        });
        jPanel2.add(btn_sco_novo, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 320, -1, -1));

        lbl_sco_local.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_sco_local.text")); // NOI18N
        jPanel2.add(lbl_sco_local, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 90, -1, -1));

        txt_sco_local.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_sco_local.text")); // NOI18N
        jPanel2.add(txt_sco_local, new org.netbeans.lib.awtextra.AbsoluteConstraints(150, 80, 260, -1));

        btn_sco_ger_recursos.setFont(new java.awt.Font("Tahoma", 1, 12)); // NOI18N
        btn_sco_ger_recursos.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.btn_sco_ger_recursos.text")); // NOI18N
        btn_sco_ger_recursos.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_sco_ger_recursosActionPerformed(evt);
            }
        });
        jPanel2.add(btn_sco_ger_recursos, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 230, 150, 40));

        jPanel1.add(jPanel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 0, 640, 440));

        abasSco.addTab(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.jPanel1.TabConstraints.tabTitle"), jPanel1); // NOI18N

        jPanel4.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel5.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lbl_list_equipes.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_list_equipes.text")); // NOI18N
        jPanel5.add(lbl_list_equipes, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 20, -1, -1));

        tbl_equipes.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "ID", "Equipe"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        tbl_equipes.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                tbl_equipesMouseClicked(evt);
            }
        });
        jScrollPane2.setViewportView(tbl_equipes);
        if (tbl_equipes.getColumnModel().getColumnCount() > 0) {
            tbl_equipes.getColumnModel().getColumn(0).setHeaderValue(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.tbl_equipes.columnModel.title0")); // NOI18N
            tbl_equipes.getColumnModel().getColumn(1).setHeaderValue(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.tbl_equipes.columnModel.title1")); // NOI18N
        }

        jPanel5.add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 50, 540, 230));

        jPanel4.add(jPanel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 630, 360));

        abasSco.addTab(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.jPanel4.TabConstraints.tabTitle"), jPanel4); // NOI18N

        jPanel3.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        txt_fld_emp_descr.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_fld_emp_descr.text")); // NOI18N
        txt_fld_emp_descr.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txt_fld_emp_descrActionPerformed(evt);
            }
        });
        jPanel3.add(txt_fld_emp_descr, new org.netbeans.lib.awtextra.AbsoluteConstraints(80, 290, 200, -1));

        lbl_emp_descricao.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_emp_descricao.text")); // NOI18N
        jPanel3.add(lbl_emp_descricao, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 290, -1, -1));

        btn_emp_gravar.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.btn_emp_gravar.text")); // NOI18N
        btn_emp_gravar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_emp_gravarActionPerformed(evt);
            }
        });
        jPanel3.add(btn_emp_gravar, new org.netbeans.lib.awtextra.AbsoluteConstraints(550, 320, -1, -1));

        tbl_empenho.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "IdEmpenho", "Descrição", "Data Inicio", "Data Fim", "IdEquipe"
            }
        ) {
            boolean[] canEdit = new boolean [] {
                false, false, false, false, false
            };

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane3.setViewportView(tbl_empenho);
        if (tbl_empenho.getColumnModel().getColumnCount() > 0) {
            tbl_empenho.getColumnModel().getColumn(0).setHeaderValue(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.tbl_empenho.columnModel.title0")); // NOI18N
            tbl_empenho.getColumnModel().getColumn(1).setHeaderValue(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.tbl_empenho.columnModel.title1")); // NOI18N
            tbl_empenho.getColumnModel().getColumn(2).setHeaderValue(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.tbl_empenho.columnModel.title2")); // NOI18N
            tbl_empenho.getColumnModel().getColumn(3).setHeaderValue(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.tbl_empenho.columnModel.title3")); // NOI18N
            tbl_empenho.getColumnModel().getColumn(4).setHeaderValue(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.tbl_empenho.columnModel.title4")); // NOI18N
        }

        jPanel3.add(jScrollPane3, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, 600, 210));

        lbl_emp_data_inicio.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_emp_data_inicio.text")); // NOI18N
        jPanel3.add(lbl_emp_data_inicio, new org.netbeans.lib.awtextra.AbsoluteConstraints(290, 290, -1, -1));

        txt_fld_emp_data_ini.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_fld_emp_data_ini.text")); // NOI18N
        txt_fld_emp_data_ini.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                txt_fld_emp_data_iniActionPerformed(evt);
            }
        });
        jPanel3.add(txt_fld_emp_data_ini, new org.netbeans.lib.awtextra.AbsoluteConstraints(350, 290, 90, -1));

        jLabel1.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.jLabel1.text")); // NOI18N
        jPanel3.add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(450, 290, -1, -1));

        txt_fld_emp_data_fim.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_fld_emp_data_fim.text")); // NOI18N
        jPanel3.add(txt_fld_emp_data_fim, new org.netbeans.lib.awtextra.AbsoluteConstraints(500, 290, 110, -1));

        lbl_emp_Equipe.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.lbl_emp_Equipe.text")); // NOI18N
        jPanel3.add(lbl_emp_Equipe, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 230, -1, -1));

        txt_fld_emp_equipe_atual.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.txt_fld_emp_equipe_atual.text")); // NOI18N
        jPanel3.add(txt_fld_emp_equipe_atual, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 230, 210, -1));

        btn_emp_novo.setText(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.btn_emp_novo.text")); // NOI18N
        btn_emp_novo.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btn_emp_novoActionPerformed(evt);
            }
        });
        jPanel3.add(btn_emp_novo, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 320, -1, -1));

        abasSco.addTab(org.openide.util.NbBundle.getMessage(TelaSCO.class, "TelaSCO.jPanel3.TabConstraints.tabTitle"), jPanel3); // NOI18N

        getContentPane().add(abasSco, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 640, 390));

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void txt_sco_nomeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txt_sco_nomeActionPerformed

    }//GEN-LAST:event_txt_sco_nomeActionPerformed

    private void btn_emp_gravarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_emp_gravarActionPerformed
        //cria novo empenho
        Empenho novoEmpenho = new Empenho();
        novoEmpenho.setDescricao(txt_fld_emp_descr.getText());
        novoEmpenho.setIdequipe(equipeSelecionada);
        novoEmpenho.setDatainicio(getPegaDataAtual());
        //novoEmpenho.setDatafim(txt_fld_emp_data_fim.getText());
        //insere campos na tabela
        empenhosTable.addRow(new Object[]{novoEmpenho.getIdempenho(), novoEmpenho.getDescricao(), novoEmpenho.getDatainicio(), novoEmpenho.getDatafim(), novoEmpenho.getIdequipe().getIdequipe()});
        limpaCamposEmpenho();
        alteraCamposEmp(false);
    }//GEN-LAST:event_btn_emp_gravarActionPerformed

    private void txt_fld_emp_descrActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txt_fld_emp_descrActionPerformed

    }//GEN-LAST:event_txt_fld_emp_descrActionPerformed

    private void txt_sco_mil_admActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txt_sco_mil_admActionPerformed

    }//GEN-LAST:event_txt_sco_mil_admActionPerformed

    private void cmb_list_scoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_cmb_list_scoActionPerformed

    }//GEN-LAST:event_cmb_list_scoActionPerformed

    private void btn_sco_carregarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_sco_carregarActionPerformed
        if (cmb_list_sco.getSelectedIndex() != 0) {
            alteraCamposSco(false);
            btn_sco_excluir.setEnabled(true);
            scoAtual = scoDao.buscaScoPorID(cmb_list_sco.getSelectedIndex());
            txt_sco_nome.setText(scoAtual.getNome());
            txt_sco_mil_cmd.setText(milControl.getMilitarbyId(scoAtual.getIdfuncionariocomando()).getNomeGuerra());
            txt_sco_mil_adm.setText(milControl.getMilitarbyId(scoAtual.getIdfuncionarioadministracao()).getNomeGuerra());
            txt_sco_mil_ope.setText(milControl.getMilitarbyId(scoAtual.getIdfuncionariooperacoes()).getNomeGuerra());
            txt_sco_mil_log.setText(milControl.getMilitarbyId(scoAtual.getIdfuncionariologistica()).getNomeGuerra());
            txt_sco_mil_plan.setText(milControl.getMilitarbyId(scoAtual.getIdfuncionarioplanejamento()).getNomeGuerra());
            txt_sco_local.setText(scoAtual.getLocal());
            limpaTabelaEquipes();
            carregaTabelaEquipes();
            abasSco.setSelectedIndex(1);
        }
    }//GEN-LAST:event_btn_sco_carregarActionPerformed

    private void txt_sco_mil_opeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txt_sco_mil_opeActionPerformed

    }//GEN-LAST:event_txt_sco_mil_opeActionPerformed

    private void btn_sco_alteraActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_sco_alteraActionPerformed

        alteraCamposSco(true);
        btn_sco_salvar.setEnabled(true);
    }//GEN-LAST:event_btn_sco_alteraActionPerformed

    private void btn_sco_novoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_sco_novoActionPerformed
        cmb_list_sco.setSelectedIndex(0);
        limpaCamposSco();
        alteraCamposSco(true);
        btn_sco_salvar.setEnabled(true);
        btn_sco_altera.setEnabled(false);
        btn_sco_excluir.setEnabled(false);

        novoSCO = new Sco();

    }//GEN-LAST:event_btn_sco_novoActionPerformed

    private void tbl_equipesMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_tbl_equipesMouseClicked
        equipeSelecionada = listaAuxEquipes.get(tbl_equipes.getSelectedRow());
        listaEmpenhos = empenhoDAO.buscaEmpenhoPorEquipe(equipeSelecionada);
        txt_fld_emp_equipe_atual.setText(equipeSelecionada.getIdequipe() + " - " + equipeSelecionada.getDescricao());
        limpaTabelaEmpenho();
        carregaTabelaEmpenho(listaEmpenhos);
        abasSco.setSelectedIndex(2);

    }//GEN-LAST:event_tbl_equipesMouseClicked

    private void txt_fld_emp_data_iniActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_txt_fld_emp_data_iniActionPerformed
        // TODO add your handling code here:
    }//GEN-LAST:event_txt_fld_emp_data_iniActionPerformed

    private void btn_emp_novoActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_emp_novoActionPerformed
        // TODO add your handling code here:
        alteraCamposEmp(true);
        txt_fld_emp_data_ini.setEnabled(false);
        txt_fld_emp_data_ini.setText(getPegaDataAtual().toString());
    }//GEN-LAST:event_btn_emp_novoActionPerformed

    private void btn_sco_salvarActionPerformed(java.awt.event.ActionEvent evt) {

        novoSCO.setNome(txt_sco_nome.getText());
        novoSCO.setLocal(txt_sco_local.getText());
        novoSCO.setIdfuncionarioadministracao(Integer.parseInt(txt_sco_mil_adm.getText()));
        novoSCO.setIdfuncionariocomando(Integer.parseInt(txt_sco_mil_cmd.getText()));
        novoSCO.setIdfuncionariologistica(Integer.parseInt(txt_sco_mil_log.getText()));
        novoSCO.setIdfuncionariooperacoes(Integer.parseInt(txt_sco_mil_ope.getText()));
        novoSCO.setIdfuncionarioplanejamento(Integer.parseInt(txt_sco_mil_plan.getText()));
        novoSCO.setDatainicio(getPegaDataAtual());
        listaSco.add(novoSCO);
        boolean estadoSave = scoDao.save(novoSCO);
        if (estadoSave) {
            JOptionPane.showMessageDialog(null, "Novo SCO Cadastrado com sucesso!");
            cmb_list_sco.addItem(novoSCO.getIdsco() + " - " + novoSCO.getNome());
            limpaCamposSco();
            alteraCamposSco(false);
            btn_sco_salvar.setEnabled(false);
            btn_sco_excluir.setEnabled(true);

        } else {
            JOptionPane.showMessageDialog(null, "Erro ao Cadastrar Equipamento");
        }

    }

    private void btn_sco_excluirActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_sco_excluirActionPerformed
        int dialogButton = JOptionPane.YES_NO_OPTION;
        int dialogResult = JOptionPane.showConfirmDialog(null, "Confirma a exclusão do SCO: " + scoAtual.getIdsco() + " ???", "CONFIRMA EXCLUSÃO", dialogButton);
        if (dialogResult == JOptionPane.YES_OPTION) {
            scoDao.remove(scoAtual);
            limpaCamposSco();
            cmb_list_sco.removeAllItems();
            cmb_list_sco.addItem("Clique para selecionar...");
            carregaTela();
            btn_sco_excluir.setEnabled(false);
        }
    }//GEN-LAST:event_btn_sco_excluirActionPerformed

    private void btn_sco_ger_recursosActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btn_sco_ger_recursosActionPerformed
        //chama tela do ricardo passando o idsco


    }//GEN-LAST:event_btn_sco_ger_recursosActionPerformed

    //pega a data e hora formatada
    public Date getPegaDataAtual() {
        Calendar calendar = new GregorianCalendar();
        Date date = new Date();
        calendar.setTime(date);
        return calendar.getTime();
    }

    public void carregaTela() {
        listaSco = scoDao.buscaScos();
        for (Sco sco : listaSco) {
            cmb_list_sco.addItem(sco.getIdsco() + " - " + sco.getNome());
        }
        btn_sco_salvar.setEnabled(false);
        btn_sco_excluir.setEnabled(false);
        txt_fld_emp_equipe_atual.setEditable(false);

    }

    public void alteraCamposSco(boolean status) {
        txt_sco_nome.setEnabled(status);
        txt_sco_mil_adm.setEnabled(status);
        txt_sco_mil_cmd.setEnabled(status);
        txt_sco_mil_log.setEnabled(status);
        txt_sco_mil_plan.setEnabled(status);
        txt_sco_mil_ope.setEnabled(status);
        txt_sco_local.setEnabled(status);
    }

    public void alteraCamposEmp(boolean status) {
        txt_fld_emp_descr.setEnabled(status);
        txt_fld_emp_data_fim.setEnabled(status);
        txt_fld_emp_data_ini.setEnabled(status);
    }

    public void limpaCamposSco() {
        txt_sco_nome.setText("");
        txt_sco_mil_adm.setText("");
        txt_sco_mil_cmd.setText("");
        txt_sco_mil_log.setText("");
        txt_sco_mil_plan.setText("");
        txt_sco_mil_ope.setText("");
        txt_sco_local.setText("");
    }

    public void limpaCamposEmpenho() {
        txt_fld_emp_descr.setText("");
        txt_fld_emp_data_fim.setText("");
        txt_fld_emp_data_ini.setText("");
    }

    public void carregaTabelaEquipes() {
        listaAuxEquipes.clear();
        listaEquipes = equipeDao.buscaEquipes();
        for (Equipe equipe : listaEquipes) {
            if (equipe != null) {
                if (equipe.getIdsco().getIdsco() == cmb_list_sco.getSelectedIndex()) {
                    listaAuxEquipes.add(equipe);
                    equipesTable.addRow(new Object[]{equipe.getIdequipe(), equipe.getDescricao()});
                }
            }
        }

    }

    public void limpaTabelaEquipes() {
        while (equipesTable.getRowCount() > 0) {
            equipesTable.removeRow(0);
        }
    }

    public void limpaTabelaEmpenho() {
        while (empenhosTable.getRowCount() > 0) {
            empenhosTable.removeRow(0);
        }
    }

    public void carregaTabelaEmpenho(List<Empenho> listaEmp) {
        for (Empenho emp : listaEmp) {
            if (emp != null) {
                empenhosTable.addRow(new Object[]{emp.getIdempenho(), emp.getDescricao(), emp.getDatainicio(), emp.getDatafim(), emp.getIdequipe().getIdequipe()});
            }
        }
    }

}
